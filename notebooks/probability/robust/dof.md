# Degrees of Freedom（自由度）笔记  
## ——以样本方差为核心案例

---

## 1. 自由度的核心定义（建模视角）

**自由度（Degrees of Freedom, DoF）**指的是：

> 在给定约束条件下，系统中仍然可以**独立变化**的变量个数。

统一公式：

DoF = 变量个数 − 独立约束个数

这不是统计特有概念，而是：
- 线性代数（子空间维数）
- 物理（系统可运动方向）
- 统计（有效随机性维度）

的同一个概念。

---

## 2. 样本方差问题的设定

给定 n 个观测值：

x1, x2, ..., xn
定义样本均值：
x̄ = (x1 + x2 + ... + xn) / n
样本方差（未除以自由度前的平方和）：
S = Σ (xi − x̄)²

问题是：

> 为什么方差要除以 (n − 1)，而不是 n？

---

## 3. 关键约束的出现（你点名的核心）

注意下面这个恒等式：

(x1 − x̄) + (x2 − x̄) + ... + (xn − x̄) = 0

### 这意味着什么？

这意味着：
- `(x1 − x̄, ..., xn − x̄)` **不是任意向量**
- 它必须满足 **一个线性约束**

即：
Σ yi = 0
yi = xi − x̄

---

## 4. 线性代数视角：子空间与维数

原始数据向量：

x = (x1, ..., xn) ∈ R^n
去均值操作等价于一个投影：
y = x − x̄·1

其中 `1 = (1,1,...,1)`。

### 结果：

- 所有去均值后的向量 y
- 都落在超平面：

H = { y ∈ R^n | Σ yi = 0 }
dim(H) = n − 1

的线性子空间。

👉 **均值这个操作，引入了 1 个线性约束**

---

## 5. 自由度的精确定义（在方差问题中）

- 原始变量数：n
- 独立线性约束数：1（由样本均值引入）

因此：

DoF = n − 1

这不是经验修正，而是**空间维数减少**。

---

## 6. “除以自由度”在这里到底是什么意思？

平方和：

Σ (xi − x̄)²

本质是：

> 向量 `(x1 − x̄, ..., xn − x̄)` 在子空间 H 中的 **平方长度**

但这个平方长度会：
- 随着子空间维数线性增长

所以如果我们想度量：

> **“每一个独立方向上的平均波动强度”**

就必须做：

(平方长度) / (子空间维数)
s² = (1 / (n − 1)) Σ (xi − x̄)²

---

## 7. 为什么不是“除以 n”？（关键澄清）

错误直觉是：

> “有 n 个数据点，就该除以 n”

但事实是：

- 你已经用掉 1 个自由度来估计均值
- 剩下的随机性，只存在于 n−1 个独立方向

所以除以 n 会：

- 系统性低估每个方向上的波动强度

---

## 8. 统一推广（回归 / ANOVA）

在一般线性模型中：

y = Xβ + ε

- 样本数：n
- 被估计参数数：p

残差自由度：

DoF = n − p

原因完全一致：
- 每估计一个参数
- 就引入一个约束
- 噪声子空间维数减少 1

---

## 9. 一句话总结（方差案例）

> 样本方差除以 (n−1)，是因为去均值操作把数据限制在  
> 一个 **Σ yi = 0 的 (n−1) 维子空间**中，  
> 方差是在这个子空间里计算的“单位维度平均能量”。

---

## 10. 关键词索引（方便回看）

- 自由度 = 有效维数
- 去均值 = 线性约束
- 方差 = 子空间平方范数 / 维数
- n−1 = 子空间维度
